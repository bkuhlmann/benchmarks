#! /usr/bin/env ruby
# frozen_string_literal: true

require "bundler/inline"

gemfile true do
  source "https://rubygems.org"

  gem "benchmark-ips"
end

list = %w[one two three four five six seven eight nine ten]
pattern = /t/

Benchmark.ips do |benchmark|
  benchmark.config time: 5, warmup: 2

  benchmark.report("#grep") { list.grep pattern }
  benchmark.report("#select") { list.select { |value| value.match? pattern } }

  benchmark.compare!
end

__END__

ruby 4.0.0 (2025-12-25 revision 553f1675f3) +YJIT +PRISM [arm64-darwin25.2.0]
Warming up --------------------------------------
               #grep   175.145k i/100ms
             #select   236.877k i/100ms
Calculating -------------------------------------
               #grep      1.794M (± 4.6%) i/s  (557.47 ns/i) -      9.108M in   5.088368s
             #select      2.448M (± 3.8%) i/s  (408.47 ns/i) -     12.318M in   5.038546s

Comparison:
             #select:  2448151.9 i/s
               #grep:  1793833.0 i/s - 1.36x  slower
