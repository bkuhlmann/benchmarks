#! /usr/bin/env ruby
# frozen_string_literal: true

require "bundler/inline"

gemfile true do
  source "https://rubygems.org"

  gem "benchmark-ips"
end

list = %w[one two three four five six seven eight nine ten]
pattern = /t/

Benchmark.ips do |benchmark|
  benchmark.config time: 5, warmup: 2

  benchmark.report("#grep") { list.grep pattern }
  benchmark.report("#select") { list.select { |value| value.match? pattern } }

  benchmark.compare!
end

__END__

ruby 3.3.0 (2023-12-25 revision 5124f9ac75) +YJIT [arm64-darwin22.6.0]
Warming up --------------------------------------
               #grep   136.641k i/100ms
             #select   134.822k i/100ms
Calculating -------------------------------------
               #grep      1.439M (± 7.5%) i/s -      7.242M in   5.061585s
             #select      1.403M (± 7.0%) i/s -      7.011M in   5.021935s

Comparison:
               #grep:  1439047.5 i/s
             #select:  1403449.3 i/s - same-ish: difference falls within error
