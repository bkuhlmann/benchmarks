#! /usr/bin/env ruby
# frozen_string_literal: true

require "bundler/inline"

gemfile true do
  source "https://rubygems.org"

  gem "bigdecimal"
  gem "benchmark-ips"
end

require "bigdecimal"

Benchmark.ips do |benchmark|
  benchmark.config time: 5, warmup: 2

  benchmark.report("Integer") { 1 + 0 }
  benchmark.report("Float") { 0.1 + 0 }
  benchmark.report("Rational") { (1 / 1r) + 0 }
  benchmark.report("BigDecimal") { BigDecimal("0.1") + 0 }

  benchmark.compare!
end

__END__

ruby 4.0.0 (2025-12-25 revision 553f1675f3) +YJIT +PRISM [arm64-darwin25.2.0]
Warming up --------------------------------------
             Integer     5.201M i/100ms
               Float     4.672M i/100ms
            Rational     1.511M i/100ms
          BigDecimal   392.886k i/100ms
Calculating -------------------------------------
             Integer     69.051M (± 2.1%) i/s   (14.48 ns/i) -    348.490M in   5.049610s
               Float     60.799M (± 0.2%) i/s   (16.45 ns/i) -    308.361M in   5.071791s
            Rational     16.517M (± 2.9%) i/s   (60.54 ns/i) -     83.094M in   5.035595s
          BigDecimal      4.020M (± 7.6%) i/s  (248.76 ns/i) -     20.037M in   5.011139s

Comparison:
             Integer: 69051130.2 i/s
               Float: 60799372.8 i/s - 1.14x  slower
            Rational: 16517265.0 i/s - 4.18x  slower
          BigDecimal:  4019908.7 i/s - 17.18x  slower
