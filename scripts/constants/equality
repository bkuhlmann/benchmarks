#! /usr/bin/env ruby
# frozen_string_literal: true

require "bundler/inline"

gemfile true do
  source "https://rubygems.org"

  gem "benchmark-ips"
end

TEST = "test"

Benchmark.ips do |benchmark|
  benchmark.config time: 5, warmup: 2

  benchmark.report("Constant First") { TEST == "test" }
  benchmark.report("Value First") { "test" == TEST }

  benchmark.compare!
end

__END__

ruby 4.0.0 (2025-12-25 revision 553f1675f3) +YJIT +PRISM [arm64-darwin25.2.0]
Warming up --------------------------------------
      Constant First     4.277M i/100ms
         Value First     4.309M i/100ms
Calculating -------------------------------------
      Constant First     55.538M (± 0.2%) i/s   (18.01 ns/i) -    278.012M in   5.005822s
         Value First     55.303M (± 1.9%) i/s   (18.08 ns/i) -    280.063M in   5.066325s

Comparison:
      Constant First: 55537887.6 i/s
         Value First: 55302727.6 i/s - same-ish: difference falls within error
